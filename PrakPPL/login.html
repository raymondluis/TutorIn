<!DOCTYPE html>
<html lang="en" dir="ltr">
  <head>
    <meta charset="utf-8">
    <link rel="shortcut icon" href="./images/favicon.png" type="image/x-icon" />
    <link rel="stylesheet" href="login.css">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <link rel="stylesheet" href="http://maxcdn.bootstrapcdn.com/font-awesome/4.2.0/css/font-awesome.min.css">
  </head>
  <body>
    <div class="wrapper">
      <div class="title-text">
        <div class="title login">Login</div>
    </div>
<div class="form-container">
        <div class="slide-controls">
          <input type="radio" name="slide" id="siswa" checked>
          <input type="radio" name="slide" id="tutor">
          <input type="radio" name="slide" id="admin">
          <label for="siswa" class="slide siswa">Siswa</label>
          <label for="tutor" class="slide tutor">Tutor</label>
          <label for="admin" class="slide admin">Admin</label>
          <div class="slider-tab">
</div>
</div>
<div class="form-inner">
    <form action="homeSiswa.html" class="siswa">
        <div class="field">
            <input type="text" class="email-siswa" placeholder="Enter your email" required>
        </div>
        <div class="field">
            <input type="password" class="pass-siswa" placeholder="Enter your password" required>
        </div>
        <div class="pass-link">
            <a href="forget.html">Forgot password?</a></div>
            <div class="field btn">
            <div class="btn-layer">
        </div>
        <input type="submit" value="Login" class="login-siswa">
        </div>
<div class="signup-link">
Not a member? <a href="signup.html">Signup now</a></div>
</form>
<form action="homeTutor.html" class="tutor">
  <div class="field">
    <input type="text" class="email-tutor" placeholder="Enter your email" required>
</div>
<div class="field">
    <input type="password" class="pass-tutor" placeholder="Enter your password" required>
</div>
<div class="pass-link">
    <a href="forget.html">Forgot password?</a></div>
    <div class="field btn">
    <div class="btn-layer">
</div>
<input type="submit" value="Login" class="login-tutor">
</div>
<div class="signup-link">
Not a member? <a href="signup.html">Signup now</a></div>
</form>
<form action="homeAdmin.html" class="admin">
  <div class="field">
    <input type="text" class="email-admin" placeholder="Enter your email" required>
</div>
<div class="field">
    <input type="password" class="pass-admin" placeholder="Enter your password" required>
</div>
<div class="pass-link">
    <a href="forget.html">Forgot password?</a></div>
    <div class="field btn">
    <div class="btn-layer">
</div>
<input type="submit" value="Login" class="login-admin">
</div>
<div class="signup-link">
Not a member? <a href="signup.html">Signup now</a></div>
</form>
</div>
</div>
</div>


<script>
      const loginForm = document.querySelector("form.siswa");
      const siswaBtn = document.querySelector("label.siswa");
      const adminBtn = document.querySelector("label.admin");
      const tutorBtn = document.querySelector("label.tutor");
      const signupLink = document.querySelector("form .signup-link a");
      tutorBtn.onclick = (()=>{
        loginForm.style.marginLeft = "-33.3333333333%";
        



      });
      adminBtn.onclick = (()=>{
        loginForm.style.marginLeft = "-66.6666666666%";
        
      });

      const siswaLGbtn = document.querySelector(".login-siswa");

      siswaLGbtn.onclick = ((e)=>{
        e.preventDefault()
        
        let email = document.querySelector('.email-siswa').value;
        let password = document.querySelector('.pass-siswa').value;


        let data = {
            "email" : email,
            "password" : password
        }

        fetch('http://dev-story.my.id:3010/siswa/login', {

          method: 'post',
          headers: {
            'Content-Type': 'application/json'
          },
          body: JSON.stringify(data)
        })
          .then(async res => {
            let response = await res.json();
            console.log(response)
            if(response.status == 'ok'){
              localStorage.setItem('token', response.token)
              window.location.href = 'http://dev-story.my.id:3010/homeSiswa.html'
            }
          })
          

      });

      const tutorLGbtn = document.querySelector(".login-tutor");

      tutorLGbtn.onclick = ((e)=>{
        e.preventDefault()
        
        let email = document.querySelector('.email-tutor').value;
        let password = document.querySelector('.pass-tutor').value;


        let data = {
            "email" : email,
            "password" : password
        }

        fetch('http://dev-story.my.id:3010/tutor/login', {

          method: 'post',
          headers: {
            'Content-Type': 'application/json'
          },
          body: JSON.stringify(data)
        })
          .then(async res => {
            let response = await res.json();
            console.log(response)
            if(response.status == 'ok'){
              localStorage.setItem('token', response.token)
              window.location.href = 'http://dev-story.my.id:3010/mySession.html'
            }
          })


      });

      const adminLGbtn = document.querySelector(".login-admin");

      adminLGbtn.onclick = ((e)=>{
        e.preventDefault()
        
        let email = document.querySelector('.email-admin').value;
        let password = document.querySelector('.pass-admin').value;


        let data = {
            "email" : email,
            "password" : password
        }

        fetch('http://dev-story.my.id:3010/admin/login', {

          method: 'post',
          headers: {
            'Content-Type': 'application/json'
          },
          body: JSON.stringify(data)
        })
          .then(async res => {
            let response = await res.json();
            console.log(response)
            if(response.status == 'ok'){
              localStorage.setItem('token', response.token)
              window.location.href = 'http://dev-story.my.id:3010/homeAdmin.html'
            }
          })


      });


      signupLink.onclick = (()=>{
        signupBtn.click();
        return false;
      });
    </script>

  </body>
  <footer class="footer-distributed">
 
    <div class="footer-left">
  
    <h3>Tutorin</h3>
  
    <p class="footer-links">
      TutorIn is a platform that provides tutoring session for those who needs guidance in learning their school work.
    </p>
  
    
    </div>
  
    <div class="footer-center">

    </div>
    <div class="footer-right">
  
    <p class="footer-company-about">
    <span>Follow Us!</span>
    </p>
  
    <div class="footer-icons">
  
    <a href="#"><i class="fa fa-facebook"></i></a>
    <a href="#"><i class="fa fa-twitter"></i></a>
    <a href="#"><i class="fa fa-linkedin"></i></a>
    <a href="#"><i class="fa fa-github"></i></a>
  
    </div>
  
    </div>
    <p class="footer-company-name">TutorIn &copy; 2020</p>
    </footer>
    <footer>
      <p>2020 &copy; TutorIn | All rights reserved.</p>
    </footer>
</html>
