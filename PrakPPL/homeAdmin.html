<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <!-- Favicon -->
    <link rel="shortcut icon" href="./images/favicon.png" type="image/x-icon" />
    <!-- Font Awesome -->
    <link
      rel="stylesheet"
      href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.15.1/css/all.min.css"
    />
    <link rel="stylesheet" href="http://maxcdn.bootstrapcdn.com/font-awesome/4.2.0/css/font-awesome.min.css">
    <!-- AOS -->
    <link
      rel="stylesheet"
      href="https://cdnjs.cloudflare.com/ajax/libs/aos/2.3.4/aos.css"
    />
    <!-- Glidejs -->
    <link
      rel="stylesheet"
      href="https://cdnjs.cloudflare.com/ajax/libs/Glide.js/3.4.1/css/glide.core.css"
    />
    <!-- Custom StyleSheet -->
    <link rel="stylesheet" href="homeAdmin.css" />
    <title>Home</title>
  </head>
  <body>
    <!-- Header -->
    <header id="home" class="header">
      <!-- Navigation -->
      <nav class="nav">
        <div class="navigation container">
          <div class="logo">
            <h1>Tutorin<span>.</span></h1>
          </div>

          <div class="menu">
            <div class="top-nav">
              <div class="logo">
                <h1>TutorIn<span>.</span></h1>
              </div>
              <div class="close">
                <i class="fas fa-times"></i>
              </div>
            </div>

            <ul class="nav-list">
              <li class="nav-item">
                <a href="profileAdmin.html" class="nav-link scroll-link">Profile</a>
              </li>
              <li class="nav-item">
                <a href="index.html" class="nav-link scroll-link">Logout</a>
              </li>
              
            </ul>
          </div>

          <div class="hamburger">
            <i class="fas fa-bars"></i>
          </div>
        </div>
      </nav>
      

      
    </header>

    <!-- Main -->
    <section class="section about" id="about">
      <div class="title">
        <h1>Payment</h1>
      </div>
      <!-- <h2>Booking ID</h2>
      <div class="about-center container" id="siswa">
        <div class="left" >
          <img src="./images/class.jpg" alt="" />
        </div>
        <div class="right" >
          <h1>Nama Siswa</h1>
          <ul>
            <li>
                <span class="label">Matkul</span>
                Harga
            </li>
        </ul>
        </div>
      </div> -->
      <!-- <div class="about-center container">
        <div class="left" >
          <img src="./images/class.jpg" alt="" />
        </div>
        <div class="right">
          <h1>Nama Siswa</h1>
          <ul>
            <li>
                <span class="label"></span>
                Payment
            </li>
        </ul>
        </div>
      </div> -->
      
      
    </section>
    <section class="section payment" id="payment" >
      <div class="title">
        <h1>Tutor Payment</h1>
      </div>
      <div class="payment-center container" class=tutor>
        <div class="left" >
          <img src="./images/class.jpg" alt="" />
        </div>
        <div class="right" >
          <h1>Name: Raymond Luis</h1>
          <ul>
            <li>
                <span class="label">Class: Biology</span>
                <span class="label">Fee: Rp160000</span>
            </li>
        </ul>
        <p>Credit Card Number: 0812-2130-1232-213</p>
        </div>
      </div>
     
      <div class="klik">
        <a href="#" class="button">Send Payment</a>
      </div>
      <div class="line"></div>
      
    </section>

    
    <!-- Footer -->
    <footer class="footer-distributed">
 
      <div class="footer-left">
    
      <h3>Tutorin</h3>
    
      <p class="footer-links">
        TutorIn is a platform that provides tutoring session for those who needs guidance in learning their school work.
      </p>
    
      
      </div>
    
      <div class="footer-center">
  
      </div>
      <div class="footer-right">
    
      <p class="footer-company-about">
      <span>Follow Us!</span>
      </p>
    
      <div class="footer-icons">
    
      <a href="#"><i class="fa fa-facebook"></i></a>
      <a href="#"><i class="fa fa-twitter"></i></a>
      <a href="#"><i class="fa fa-linkedin"></i></a>
      <a href="#"><i class="fa fa-github"></i></a>
    
      </div>
    
      </div>
      <p class="footer-company-name">TutorIn &copy; 2020</p>
      </footer>
    <footer>
      <p>2020 &copy; TutorIn | All rights reserved.</p>
    </footer>

    <!-- AOS -->
    <script src="https://cdnjs.cloudflare.com/ajax/libs/aos/2.3.4/aos.js"></script>
    <!-- Typeit -->
    <script src="https://cdnjs.cloudflare.com/ajax/libs/typeit/7.0.4/typeit.min.js"></script>
    <!-- GSAP -->
    <script src="https://cdnjs.cloudflare.com/ajax/libs/gsap/3.5.1/gsap.min.js"></script>
    <!-- Glidejs -->
    <script src="https://cdnjs.cloudflare.com/ajax/libs/Glide.js/3.4.1/glide.min.js"></script>
    <!-- Custom Script -->
    <script src="index.js"></script>

    <script>

      function verifySiswa(transactionId) {
        let data = {
            "transactionId" : transactionId
          }
        fetch('http://dev-story.my.id:3010/admin/verify/siswa/payment', {
        
          
        method: 'post',
        headers: {
          'Content-Type': 'application/json',
          'auth-token': localStorage.getItem('token')
        },
        body: JSON.stringify(data)
        })
        .then(async res => {
          let response = await res.json();
          console.log(response)
          
          if(response.status == 'ok'){
            window.location.href = 'http://dev-story.my.id:3010/homeAdmin.html';
          }
        })
      }

        fetch('http://dev-story.my.id:3010/admin/retrieve/siswa/payment', {
  
          method: 'post',
          headers: {
            'Content-Type': 'application/json',
            'auth-token': localStorage.getItem('token')
          }
          
          })
          .then(async res => {
            let response = await res.json();
            console.log(response)
            let hasil = document.querySelector('.about')
            if(response.status == 'ok'){
              response.data.forEach(siswa => {  
              hasil.innerHTML += 
                    `<h2>Booking ID: ${siswa.id}</h2>
                    <div class="about-center container" id="siswa">
                      <div class="left" >
                        <img src="./images/class.jpg" alt="" />
                      </div>
                      <div class="right" >
                        <h1>Name: ${siswa.siswa.nama}</h1>
                        <ul>
                          <li>
                            <span class="label">Phone Number: ${siswa.siswa.nomor_hp}</span>
                              <span class="label">Payment: Rp200000</span>
                              <span class="label">Payment Time: ${siswa.updatedAt}</span>
                          </li>
                      </ul>
                      </div>
                    </div>
                    <div class="klik">
                    <a href="#" onclick="verifySiswa('${siswa.transaction.id}');" class="button">Verify</a>
                  </div>
                  <div class="line"></div>`
              })
            }
          })




      
          fetch('http://dev-story.my.id:3010/admin/retrieve/tutor/payment', {
  
          method: 'post',
          headers: {
            'Content-Type': 'application/json',
            'auth-token': localStorage.getItem('token')
          }
          
          })
          .then(async res => {
            let response = await res.json();
            console.log(response)
            let hasil = document.querySelector('.tutor')
            if(response.status == 'ok'){
              response.data.forEach(tutor => {  
              hasil.innerHTML += 
                    `<div class="left" >
                    <img src="./images/class.jpg" alt="" />
                  </div>
                  <div class="right" >
                    <h1>${tutor.siswaId}</h1>
                    <ul>
                      <li>
                          <span class="label"${tutor.topicId}</span>
                          Rp160000
                      </li>
                  </ul>
                  </div>`
              })
            }
          })
      </script>


  </body>
</html>
